<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Study Questionnaire</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; max-width: 720px; margin: 32px auto; padding: 0 16px; }
    h1 { font-size: 22px; margin: 0 0 12px; }
    p { line-height: 1.45; }
    label { display:block; font-weight: 600; margin: 16px 0 6px; }
    input, textarea, select { width: 100%; padding: 10px; font-size: 16px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 10px; }
    textarea { min-height: 110px; resize: vertical; }
    .row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    .card { border: 1px solid #eee; border-radius: 16px; padding: 16px; box-shadow: 0 2px 10px rgba(0,0,0,0.04); }
    .btn { margin-top: 18px; padding: 12px 14px; border: 0; border-radius: 12px; font-size: 16px; cursor: pointer; }
    .btn-primary { background: #111; color: #fff; }
    .muted { color: #666; font-size: 14px; }
    .ok { margin-top: 14px; padding: 12px; border-radius: 12px; background: #f2fff1; border: 1px solid #cfeacc; display:none; }
    .err { margin-top: 14px; padding: 12px; border-radius: 12px; background: #fff2f2; border: 1px solid #f0c9c9; display:none; }
  </style>
</head>
<body>
  <h1>Study daily questionnaire</h1>
  <p class="muted">
    Please answer calmly. Your answers are sent securely to our study database (Google Forms).
  </p>

  <div class="card">
    <!--
      IMPORTANT:
      1) Replace FORM_ACTION_URL with your Google Form formResponse URL.
      2) Replace entry.XXXXXXXXX with your actual entry IDs.
    -->
    <form id="studyForm">
      <label for="pid">Participant ID</label>
      <input id="pid" name="entry.1111111111" placeholder="e.g., BW-0241" required />

      <div class="row">
        <div>
          <label for="day">Study day</label>
          <input id="day" name="entry.2222222222" type="number" min="1" step="1" placeholder="e.g., 5" required />
        </div>
        <div>
          <label for="date">Date</label>
          <input id="date" name="entry.3333333333" type="date" required />
        </div>
      </div>

      <label for="wellbeing">Overall wellbeing (0â€“10)</label>
      <input id="wellbeing" name="entry.4444444444" type="number" min="0" max="10" step="1" required />

      <label for="symptoms">Any symptoms today?</label>
      <textarea id="symptoms" name="entry.5555555555" placeholder="Headache, dizziness, sleep issues, etc."></textarea>

      <label for="notes">Anything you would like to add?</label>
      <textarea id="notes" name="entry.6666666666" placeholder="Free text"></textarea>

      <button class="btn btn-primary" type="submit">Send answers</button>

      <div id="ok" class="ok">Thank you. Your answers were sent.</div>
      <div id="err" class="err">Sorry, the submission did not work. Please try again.</div>
    </form>
  </div>

  <script>
    // Paste your Google Form "formResponse" URL here:
    const FORM_ACTION_URL = "https://docs.google.com/forms/d/e/YOUR_FORM_ID/formResponse";

    // Optional: prefill date with today
    (function init() {
      const d = new Date();
      const yyyy = d.getFullYear();
      const mm = String(d.getMonth() + 1).padStart(2, "0");
      const dd = String(d.getDate()).padStart(2, "0");
      document.getElementById("date").value = `${yyyy}-${mm}-${dd}`;

      // Optional: read URL parameters like ?pid=BW-0241&day=5
      const params = new URLSearchParams(window.location.search);
      if (params.get("pid")) document.getElementById("pid").value = params.get("pid");
      if (params.get("day")) document.getElementById("day").value = params.get("day");
    })();

    document.getElementById("studyForm").addEventListener("submit", async (e) => {
      e.preventDefault();

      const ok = document.getElementById("ok");
      const err = document.getElementById("err");
      ok.style.display = "none";
      err.style.display = "none";

      const formEl = e.target;
      const formData = new FormData(formEl);

      try {
        // Google Forms does not send CORS headers, so we must use no-cors.
        // That means we cannot read the response, but submission works.
        await fetch(FORM_ACTION_URL, {
          method: "POST",
          mode: "no-cors",
          body: formData
        });

        formEl.reset();
        ok.style.display = "block";
      } catch (error) {
        err.style.display = "block";
      }
    });
  </script>
</body>
</html>
